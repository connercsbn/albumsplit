(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{126:function(e,t,n){},128:function(e,t,n){},142:function(e,t,n){"use strict";n.r(t);var a=n(0),i=n.n(a),c=n(12),r=n.n(c),o=(n(126),n(17)),s=n.n(o),l=n(28),d=n(9),u=(n(128),n(129),n(46)),b=n.n(u),j=n(55),p=n(181),f=n(195),m=n(148),h=n(79),g=n(5),O=function(e){var t=e.timeCodes,n=e.timeCodesList,i=e.original,c=e.showingIndex,r=e.curr,o=e.timeCodesString,s=e.split,l=e.setTimeCodesString,u=Object(h.useSpring)((function(){return{from:{opacity:0,transform:"translateX(100%)"},to:{opacity:1,transform:"translateX(0%)"}}})),b=Object(d.a)(u,2),p=b[0],O=b[1],x=Object(m.a)((function(e){return{root:{padding:"1em",display:"block",lineHeight:.75}}}));Object(a.useEffect)((function(){c===r?O({opacity:1,transform:"translateX(0%)"}):c>r?O({opacity:0,transform:"translateX(-100%)"}):c<r&&O({opacity:0,transform:"translateX(100%)"})}),[O,c,r]);x();var v,y=function(e){return e?e.map((function(e,t){var n=Object(d.a)(e,2),a=n[0],i=n[1];return"".concat(a," ").concat(i)})).join("\n"):""},S=Object(a.useCallback)((function(){l(y(i[c]))}),[i,c,l]);return Object(a.useEffect)((function(){S()}),[c,S]),Object(a.useEffect)((function(){t&&l(y(t)),console.log(t),console.log(n)}),[t,l,n]),Object(g.jsx)(g.Fragment,{children:Object(g.jsx)(h.animated.div,{style:Object(j.a)(Object(j.a)({},p),{},{position:"absolute",width:"100%"}),children:Object(g.jsx)(f.a,{label:(null===n||void 0===n?void 0:n.length)>1?(v=r,v<3?"Timecodes from ".concat(["1st","2nd","3rd"][v]," comment"):"Timecodes from ".concat(v+1,"th comment")):"Timecodes",style:{position:"relative",display:"block",width:"calc(100% - 80px)",margin:"auto"},Z:!0,disabled:!s,maxRows:13,minRows:13,color:"secondary",value:o,onChange:function(e){return l(e.target.value)},square:!1,spellCheck:!1,id:"outlined-multiline-static",fullWidth:!0,multiline:!0,defaultValue:"Default Value",variant:"outlined"})})})},x=n(94),v=n.n(x),y=n(95),S=n.n(y),k=n(191),C=n(105),w=Object(C.a)(p.a)({padding:"5px",minWidth:0}),I=function(e){var t=e.timeCodes,n=e.original,a=e.index,i=e.setIndex,c=e.timeCodesString,r=e.split,o=e.setTimeCodesString,s=function(e){return e===a?{zIndex:100}:{zIndex:0}};return Object(g.jsx)(g.Fragment,{children:Object(g.jsxs)(k.a,{style:{position:"relative",height:"300px"},children:[a>0&&Object(g.jsx)(w,{onClick:function(){i(a-1)},style:{position:"absolute",left:"0px",top:"118px",zIndex:200},children:Object(g.jsx)(v.a,{style:{transform:"translateX(4px)",padding:0}})}),t.length?t.map((function(e,i){return Object(g.jsx)("div",{id:"timecodes",style:Object(j.a)(Object(j.a)({},s(i)),{},{position:"relative",width:"100%"}),children:Object(g.jsx)(O,{style:{position:"absolute"},showingIndex:a,curr:i,split:r,timeCodesList:t,timeCodes:e,original:n,timeCodesString:c,setTimeCodesString:o})},i)})):Object(g.jsx)("p",{}),"  ",a<t.length-1&&Object(g.jsx)(w,{onClick:function(){i(a+1)},style:{position:"absolute",right:"0px",top:"118px",zIndex:200},children:Object(g.jsx)(S.a,{style:{padding:0}})})]})})},T=n(96),z=n(61);function F(e){var t=e.activeStep,n=e.albumUrl,a=(e.zipUrl,e.handleNext),i=e.classes;return 2===t?"":Object(g.jsx)(p.a,{disabled:0===t&&n.length<1,variant:"contained",color:"primary",onClick:function(){a(t)},className:i.button,children:"Next"})}var N,R=n(146),L=n(183),A=n(184),U=n(194),E=n(147),P=n(145),W=n(4),X=n(68),B=n(6),D=n(182),J=n(101),M=n.n(J),Y=n(97),q=n.n(Y),V=n(98),H=n.n(V),$=n(100),Z=n.n($),_=n(99),G=n.n(_);function K(e){var t,n=ee(),a=e.active,i=e.completed,c={1:Object(g.jsx)(q.a,{}),2:Object(g.jsx)(H.a,{}),3:Object(g.jsx)(G.a,{})};return Object(g.jsx)("div",{className:Object(W.a)(n.root,(t={},Object(z.a)(t,n.active,a),Object(z.a)(t,n.completed,i),t)),children:i?Object(g.jsx)(Z.a,{}):c[String(e.icon)]})}var Q=Object(B.a)({alternativeLabel:{top:22},active:{"& $line":{backgroundImage:"linear-gradient( 95deg,var(--cyan) 0%, var(--yellow) 30%,var(--magenta) 100%)"}},completed:{"& $line":{backgroundImage:"linear-gradient( 95deg,var(--blue) 0%,var(--cyan) 100%)"}},line:{height:3,border:0,backgroundColor:"#eaeaf0",borderRadius:1}})(R.a),ee=Object(D.a)({root:{backgroundColor:"#918d85",zIndex:1,color:"rgba(250,250,255,1)",width:50,height:50,display:"flex",borderRadius:"50%",justifyContent:"center",alignItems:"center"},active:{position:"relative",background:"linear-gradient( 136deg, #ffca4e 0%, #e6b23a 50%, #994537 100%)",boxShadow:"0 4px 10px 0 rgba(0,0,0,.25)","&::before":{position:"absolute",content:'""',top:0,right:0,bottom:0,left:0,borderRadius:"50%",backgroundImage:"linear-gradient( 136deg, #fffc 0%, #e8aa1899 50%, #664d1c 100%)",zIndex:-1,transition:"opacity 0.2s ease",opacity:0},"&:hover, &:focus":{"&::before":{opacity:.8}}},completed:{position:"relative","&::before":{position:"absolute",content:'""',top:0,right:0,bottom:0,left:0,borderRadius:"50%",backgroundImage:"linear-gradient(136deg, #bfe8b1 0%, #4b8256 60%, #50826e 100%)",zIndex:-1,transition:"opacity 0.2s ease",opacity:0},"&:hover, &:focus":{"&::before":{opacity:.5}},backgroundImage:"linear-gradient( 136deg, var(--cyan) 0%, var(--blue) 60%, var(--blue) 100%)"}}),te=Object(D.a)((function(e){return{root:{width:"100%",button:{marginRight:e.spacing(100),background:e.palette.info},instructions:{marginTop:e.spacing(1),marginBottom:e.spacing(1),color:e.palette.secondary}}}}));function ne(e){return["Pick a YouTube album or audio book whose timecodes are in the description or comments, and this will download the album, separate and tag each track, and put it in a zip file","Here are the best timestamps we could find. These will be used to split the album, so fix any mistakes here or write your own."][e]}function ae(e){var t=e.initialStepsContent,n=e.handleSubmit,i=e.handleFinalize,c=e.albumUrl,r=e.loading,o=e.setLoading,s=e.handleUrlChange,l=e.zipUrl,u=e.setActiveStep,b=e.activeStep,j=te(),m=Object(a.useState)(0),h=Object(d.a)(m,2),O=h[0],x=h[1],v=["Input YouTube link","Confirm tracklist","Prepare download"],y=Object(a.useCallback)((function(e){console.log(e),0===e?n():1===e&&i(),u((function(e){return e+1}))}),[i,n,u]),S=Object(a.useMemo)((function(){return Object(g.jsx)(g.Fragment,{children:Object(g.jsx)("form",{onSubmit:function(e){e.preventDefault(),y(b)},noValidate:!0,autoComplete:"off",children:Object(g.jsx)(f.a,{style:{margin:"1em 0"},variant:"outlined",color:"secondary",onChange:s,spellCheck:!1,autoFocus:!0,id:"standard-basic",label:"YouTube URL",value:c,size:"large",fullWidth:!0})})})}),[s,c,y,b]);Object(a.useEffect)((function(){x([S,t[0],t[1],t[2]])}),[t,S]);return Object(g.jsxs)("div",{className:j.root,children:[Object(g.jsx)(L.a,{activeStep:b,alternativeLabel:!0,style:{backgroundColor:"unset",padding:"1em 0.4em"},connector:Object(g.jsx)(Q,{}),children:v.map((function(e,t){return Object(g.jsx)(A.a,{children:Object(g.jsx)(U.a,{onClick:function(){return function(e){b>e?u(e):1===e&&0===b&&c&&y()}(t)},StepIconComponent:K,children:e})},e)}))}),Object(g.jsx)("div",{children:b===v.length?Object(g.jsxs)("div",{children:[Object(g.jsx)(E.a,{className:j.instructions,children:O[b]}),Object(g.jsx)(p.a,{variant:"contained",color:"primary",onClick:function(){u(0),o(!1)},className:j.button,children:"Reset"})]}):Object(g.jsxs)("div",{children:[Object(g.jsxs)(E.a,{className:j.instructions,variant:"subtitle1",children:[b<2&&Object(g.jsx)(P.a,{variant:"elevation",elevation:3,style:{padding:"0.01em 1em",margin:"1em 0"},children:Object(g.jsx)("p",{children:ne(b)})}),Object(g.jsx)(M.a,{loading:r&&1===b,size:15,color:"#8ec07c",css:Object(X.css)(N||(N=Object(T.a)(["\n                  position: absolute;\n                  display: block;\n                  margin: 7em auto;\n                  text-align: center;\n                  left: 50%;\n                  left: calc(50% - 28px);\n                "])))}),O[b]]}),Object(g.jsxs)("div",{style:{paddingBottom:20},children:[Object(g.jsx)(p.a,{disabled:0===b,onClick:function(){u((function(e){return e-1}))},className:j.button,children:"Back"}),Object(g.jsx)(F,{style:{zIndex:200},activeStep:b,albumUrl:c,steps:v,classes:j,zipUrl:l,handleNext:y})]})]})})]})}var ie=n(102),ce=n.n(ie),re=n(198),oe=n(78),se=n.n(oe),le=function(e){var t=e.info,n=e.setNewInfo,a=e.original,i=e.label;return Object(g.jsx)(g.Fragment,{children:Object(g.jsxs)("div",{style:{display:"flex",marginTop:20,marginBottom:20},children:[Object(g.jsx)(f.a,{spellcheck:!1,value:t,label:i,onChange:function(e){return n(e.target.value)}}),t!==a&&Object(g.jsx)(re.a,{title:"Reset",placement:"right",children:Object(g.jsx)(p.a,{onClick:function(){n(a)},style:{height:"min-content",width:"min-content",alignSelf:"center",color:"var(--blue)",minWidth:0},children:Object(g.jsx)(se.a,{fontSize:"small",style:{width:20,height:20}})})})]})})},de=n(185),ue=n(192),be=n(179),je=n(197),pe=n(190),fe=n(199),me=n(186),he=n(187),ge=n(188),Oe=n(189),xe=n(104),ve="#1c1e21",ye="#fabd2f",Se="#8cbdab",ke="#ebdbb2",Ce="#b16286",we=Object(xe.a)({palette:{type:"dark",primary:{main:Se},secondary:{main:ye},warning:{main:Ce},text:{primary:ke,secondary:ke,disabled:ke,hint:ke,icon:ke,divider:ke},background:{paper:ve,default:ve}},shape:{borderRadius:8}});function Ie(){return(Ie=Object(l.a)(s.a.mark((function e(){var t,n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0!==b.a.get("csrftoken")){e.next=8;break}return e.next=3,fetch("https://api.conner.soy/csrf/",{credentials:"include"});case 3:return t=e.sent,e.next=6,t.json();case 6:n=e.sent,b.a.set("csrftoken",n.csrfToken);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Te=function(){return Ie.apply(this,arguments)};var ze=function(){var e=Object(a.useState)(!1),t=Object(d.a)(e,2),n=t[0],i=t[1],c=Object(a.useState)(),r=Object(d.a)(c,2),o=r[0],u=r[1],j=Object(a.useState)(),f=Object(d.a)(j,2),m=f[0],h=f[1],O=Object(a.useState)(""),x=Object(d.a)(O,2),v=x[0],y=x[1],S=Object(a.useState)(""),k=Object(d.a)(S,2),C=k[0],w=k[1],T=Object(a.useState)(!1),z=Object(d.a)(T,2),F=z[0],N=z[1],R=Object(a.useState)(""),L=Object(d.a)(R,2),A=L[0],U=L[1],P=Object(a.useState)({timecodes:[""]}),W=Object(d.a)(P,2),X=W[0],B=W[1],J=Object(a.useState)(!0),M=Object(d.a)(J,2),Y=M[0],q=M[1],V=Object(a.useState)(""),H=Object(d.a)(V,2),$=H[0],Z=H[1],_=Object(a.useState)(""),G=Object(d.a)(_,2),K=G[0],Q=G[1],ee=Object(a.useState)([]),te=Object(d.a)(ee,2),ne=te[0],ie=te[1],re=Object(a.useState)(""),oe=Object(d.a)(re,2),se=oe[0],xe=oe[1],ve=Object(a.useState)(""),ye=Object(d.a)(ve,2),Se=ye[0],ke=ye[1],Ce=Object(a.useState)(""),Ie=Object(d.a)(Ce,2),ze=Ie[0],Fe=Ie[1],Ne=Object(a.useState)(""),Re=Object(d.a)(Ne,2),Le=Re[0],Ae=Re[1],Ue=Object(a.useState)("opus"),Ee=Object(d.a)(Ue,2),Pe=Ee[0],We=Ee[1],Xe=Object(a.useState)(0),Be=Object(d.a)(Xe,2),De=Be[0],Je=Be[1],Me=Object(a.useState)(""),Ye=Object(d.a)(Me,2),qe=Ye[0],Ve=Ye[1],He=Object(a.useState)(0),$e=Object(d.a)(He,2),Ze=$e[0],_e=$e[1],Ge=Object(D.a)((function(e){return{formControl:{margin:e.spacing(0),minWidth:220},selectEmpty:{marginTop:e.spacing(2)}}}))();Object(a.useEffect)((function(){ce.a.load({google:{families:["Roboto Slab","Droid Sans","Chilanka"]}})}),[]);var Ke=function(){var e=Object(l.a)(s.a.mark((function e(){var t,n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://api.conner.soy/get_album/",{method:"POST",credentials:"include",headers:{"X-CSRFToken":b.a.get("csrftoken"),Accept:"applications/json","Content-Type":"application/json"},body:JSON.stringify({title:se,url:$,titleid:K,timecodes:qe,artist:Se,year:ze,split:Y})});case 2:return t=e.sent,e.next=5,t.json();case 5:n=e.sent,u(n.id);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(a.useEffect)((function(){Te()}),[]),Object(a.useEffect)((function(){if(o){i(!0);var e=setInterval(Object(l.a)(s.a.mark((function e(){var t,n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://api.conner.soy/progress/"+o);case 2:return t=e.sent,e.next=5,t.json();case 5:n=e.sent,console.log(n),w(n.progress.percent),y(n.progress.description),!0===n.complete&&(n.result.timecodes?(N(!0),ie(n.result.timecodes),xe(n.result.title),ke(n.result.artist),Fe(n.result.year),Q(n.result.titleid),B({timecodes:n.result.timecodes,title:n.result.title,artist:n.result.artist,year:n.result.year}),i(!1),console.log("complete")):n.result.zipurl&&(N(!0),Ae("https://api.conner.soy"+n.result.zipurl),i(!1),_e(3)));case 10:case"end":return e.stop()}}),e)}))),500);h(e)}}),[o]);var Qe=function(){var e=Object(l.a)(s.a.mark((function e(){var t,n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if($!==A){e.next=2;break}return e.abrupt("return");case 2:return i(!0),e.next=5,fetch("https://api.conner.soy/yturl/",{method:"POST",credentials:"include",headers:{"X-CSRFToken":b.a.get("csrftoken"),Accept:"applications/json","Content-Type":"application/json"},body:JSON.stringify({url:$})});case 5:return t=e.sent,U($),e.next=9,t.json();case 9:n=e.sent,u(n.id),i(!1),console.log(n);case 13:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(a.useEffect)((function(){F&&(clearInterval(m),N(!1))}),[F,m]);var et=Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)(le,{info:se,setNewInfo:xe,original:X.title,label:"Album title"}),Object(g.jsx)(le,{info:Se,setNewInfo:ke,original:X.artist,label:"Artist"}),Object(g.jsx)(le,{info:ze,setNewInfo:Fe,original:X.year,label:"Year"}),Object(g.jsx)(de.a,{control:Object(g.jsx)(ue.a,{checked:Y,onChange:function(){return q(!Y)},name:"Split tracks",color:"primary"}),label:"Split tracks"}),Object(g.jsx)("div",{style:{display:"flex",marginTop:20,marginBottom:20},children:Object(g.jsxs)(be.a,{className:Ge.formControl,children:[Object(g.jsx)(je.a,{id:"demo-simple-select-autowidth-label",children:"Audio file type"}),Object(g.jsxs)(pe.a,{labelId:"select-audio-type",id:"select-audio-type",value:Pe,onChange:function(e){We(e.target.value)},MenuProps:{disableScrollLock:!0},children:[Object(g.jsxs)(fe.a,{value:"opus",children:["Opus"," ",Object(g.jsx)("span",{style:{fontSize:".8em",float:"right",fontStyle:"italic",marginLeft:"8px"},children:"higher quality"})]}),Object(g.jsxs)(fe.a,{value:"mp3",children:["MP3"," ",Object(g.jsx)("span",{style:{fontSize:".8em",float:"right",fontStyle:"italic",marginLeft:"8px"},children:"lower quality"})," "]})]})]})}),Object(g.jsx)(I,{timeCodesIndex:De,original:X.timecodes,split:Y,timeCodes:ne,index:De,setIndex:Je,timeCodesString:qe,setTimeCodesString:Ve})]}),tt=v&&Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)(me.a,{variant:"determinate",value:C}),Object(g.jsx)(E.a,{children:v})]}),nt=Object(g.jsx)(g.Fragment,{children:Object(g.jsx)(p.a,{color:"secondary",style:{display:"flex",margin:"auto",textAlign:"center",fontSize:"1.2em",maxWidth:"9em"},variant:"contained",href:Le,children:"Download"})});return Object(g.jsx)(g.Fragment,{children:Object(g.jsxs)(he.a,{theme:we,children:[Object(g.jsx)(ge.a,{}),Object(g.jsx)(Oe.a,{maxWidth:"md",style:{padding:"2% 1em",overflow:"hidden"},children:Object(g.jsxs)("div",{className:"App",children:[Object(g.jsx)(E.a,{id:"heading",variant:"h2",onClick:function(){return window.location.reload()},style:{width:"max-content",cursor:"pointer",textDecoration:"underline var(--cyan) 5px",color:"var(--blue)",padding:".5em 0",fontWeight:"normal",fontFamily:"Roboto Slab",textAlign:"left"},children:"Albumsplit"}),Object(g.jsx)(ae,{initialStepsContent:[et,tt,nt],handleSubmit:Qe,handleFinalize:Ke,albumUrl:$,loading:n,setLoading:i,handleUrlChange:function(e){Z(e.target.value)},zipUrl:Le,setActiveStep:_e,activeStep:Ze})]})})]})})},Fe=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,201)).then((function(t){var n=t.getCLS,a=t.getFID,i=t.getFCP,c=t.getLCP,r=t.getTTFB;n(e),a(e),i(e),c(e),r(e)}))};r.a.render(Object(g.jsx)(i.a.StrictMode,{children:Object(g.jsx)(ze,{})}),document.getElementById("root")),Fe()}},[[142,1,2]]]);
//# sourceMappingURL=main.b4ac4a0a.chunk.js.map